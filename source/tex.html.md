---
layout: flat
title: LaTeXの導入
lead:  
pageid: tex
---


## はじめに

素粒子理論分野で論文を書くときには、多くの場合LaTeXが使われます。LaTeXは現在の基準ではお世辞にも使いやすいソフトとは言えませんが「みんなが使っている」ということと「代替品が無い」という理由で、現在でもこの分野の論文はほぼすべてLaTeXで書かれています。この状況はおそらく今後も長く変わらないでしょう。

LaTeXの環境としては、2024年現在ではWebアプリである[Overleaf](https://ja.overleaf.com/)を使うのが一番楽で安定しているようです。なので、とりあえずLaTeXを使ってみようという人はOverleafを使うことをおすすめします。ただOverleafは、無料版だと履歴が1日分くらいしか残せないとか、コンパイルが遅い等々不満点もあるようです。また共同研究などでGithubを使って共同で論文を書く場合には無料版だとできない（未確認）ので共同研究者がOverleafを使ってくれない場合にはローカルにインストールする必要があると思います。

ここでは、そういう必要にせまられてローカルでLaTeXの環境を構築する人のために、なるべく最短で使えるようになるようにインストールや設定のしかたなどを説明します。念頭においているのは、科学分野の学生や研究者で英語の論文をLaTeXで書くし、日本語の書類もLaTeXで書く場合もあり、共同執筆することもある人です。OSはMacで説明しています。あと、この手の情報はすぐに古くなるので注意してください。以下2025年1月の情報です。

※2025年1月：デフォルトの設定をlualatexを使うようにしました。

## VSCode

### インストールと基本的な設定

まずはVSCodeをインストールします。
[Visual Studio Code - Code Editing. Redefined](https://code.visualstudio.com/)に行ってダウンロードしてきて、指示にしたがってインストールします。

起動したらお好みにより日本語化します。VSCodeで絶対に覚えるべきショートカットは ⌘+⇧+P です。ここからすべてのメニューに行くことができます。さて、⌘+⇧+Pを押して“display”と打ってみるとメニューで“Configure display language”というのが出てくるので、それを選びます。そこから日本語を選ぶと拡張機能をダウンロードしてメニューなどを日本語に設定してくれます。

他の設定は⌘+,（コンマ）を押すことで行けます。おそらくこの段階で設定したいと思うことの一つはフォントの大きさでしょう。検索するなどしてEditor:Font Sizeを見つけて、お好みの値に設定してください。

### ターミナル

LaTeXなどを用いる場合、ターミナルを使うことは避けることが難しいです。なのでここでは最低限の使い方を説明します。ターミナルを使うことに慣れている方はここは読み飛ばしてください。

VSCodeにはターミナルが内蔵されています。⌘+j で下部にターミナルのタブが開きます。下部にターミナルではないものが開いている場合には、その枠の上のところの「ターミナル」と書いてあるところを押してください。

ターミナルの使い方の基本は、コマンドを打ち込んで↵キーを押すとそのコマンドを実行するというものです。カレントディレクトリ（カレントフォルダー）という概念があって、ファイル名だけを指定すると、カレントディレクトリにあるその名前のファイルに対して操作を行うことになります。また、入力の際にコマンドやファイル名を途中まで入力してtabキーを押すと補完されます。

いくつか有用なコマンドを紹介します。

- `pwd` : カレントディレクトリを出力します。
- `cd （ディレクトリ名）` ：ディレクトリ名で表されるディレクトリに移動します。
  - `cd` : ディレクトリ名を入れずに`cd`だけ入力するとホームディレクトリに移動します。
  - `cd ..` : 一つ上のディレクトリに移動します
- `ls` : カレントディレクトリにあるファイルとディレクトリのリストを表示します。
- `open （ファイル名）` : そのファイルを関連付けされたアプリで開きます。
  - `open （ディレクトリ名）` : そのディレクトリをfinderで開きます。特に`open .`とするとカレントディレクトリをfinderで開きます。

## TeX Live

TeXの「本体」とライブラリ等すべてまとめたものはTeX Liveと呼ばれて配布されているので、これをインストールします。Macの場合は、TeX Liveに他に有用なソフトをまとめてMacTeXという名前で配布されています。[MacTeX - TeX Wiki](https://texwiki.texjp.org/?MacTeX)にインストールや設定のしかたの説明があります。

以下はhomebrewを用いたインストールを説明します。

### Homebrew

Homebrewをインストールします。すでにHomebrewがインストールされている方は、ここは飛ばしてください。インストールされているかどうかは、ターミナルで``brew``と入力してみると分かります。使い方が表示されればインストールされています。「コマンドがない」という趣旨のエラーが出たらインストールされていません。

インストールの仕方は[Homebrew — The missing package manager for OS X](https://brew.sh/)に行って、その指示に従ってください。基本的にコマンドをターミナルにコピペして入力することでインストールされます。

### MacTeX

Homebrewが準備できたらMacTeXのインストールを行います。次のようにターミナルに入力していくことで、インストールできます。

1. MacTeXのインストールをします。これは非常に長い時間（2時間くらい？）かかります。途中でパスワードを求められることもあります。

    ```sh
    brew install --cask mactex
    ```

    ここで一旦ターミナルを再起動する必要があるらしいです。

2. アップデートをします。これも時間がかかる場合があります。

    ```sh
    sudo tlmgr update --self --all
    ```

3. デフォルトの紙をA4にします。

    ```sh
    sudo tlmgr paper a4
    ```

## 必要な設定

### latexmk

TeXで必要な回数texをかけてくれたり、必要ならbibtexなども自動的にやってくれるツールです。基本的に下で説明するlatex-workshopの中から使います。

latexmkを使うためには、設定ファイルを書く必要があります。一番良く使うであろうものを ~/.latexmkrc に書きます。VSCodeのメニューのファイル＞新しいテキストファイルを選びます。そして次の設定をコピペします。

``` perl
$texoption = ' %O -interaction=nonstopmode -file-line-error -synctex=1 %S';
$latex = 'uplatex'.$texoption;
$pdflatex = 'pdflatex'.$texoption;
$lualatex = 'lualatex'.$texoption;
$biber = 'biber %O --bblencoding=utf8 -u -U --output_safechars %B';
$bibtex = 'pbibtex %O %B';
$makeindex = 'upmendex %O -o %D %S';
$dvipdf = 'dvipdfmx %O -o %D %S';
$pdf_mode = 4;
```

できたら⌘+sを押して保存します。保存場所とファイル名を選ぶので次のようにしてください。

- ファイル名: ".latexmkrc" （最初に.（ピリオド）があることに注意）
- 場所：ホームディレクトリ（ユーザー名がついているフォルダで家のアイコンがついているもの）

### latex-workshopのインストール

VSCodeのパッケージlatex-workshopをインストールします。やり方は、次のとおりです。

- VSCode を立ち上げ、左端に並んでいるボタンのうち一番下のもの（拡張機能の管理）を押します。
- そこでlatex-workshopを検索して「インストール」のところを押します。
- そして「再読み込み」のところを押します。

### テスト

ここまでで最低限必要な設定が終わったので、動くかどうかテストしてみましょう。

- VSCodeのメニューからファイル＞フォルダを開くを選択し、適当なところ（分からなければ「書類」の直下）に“latextest”という新しいフォルダを作って開いてください。
- VSCodeのウインドウの右に立てに並んでいるアイコンのうち、一番上の書類っぽいアイコンを押して「エクスプローラー」を開いてください。
- エクスプローラーのlatextestの下の空いているところを右クリックし、コンテキストメニューから「新しいファイル」を選んでください。ファイル名を入力するようになるので、“test.tex”としてください。ファイルが開いて編集できるようになると思います。
- このファイルに次をコピペして保存してください。

  ``` latex
  \documentclass{jlreq}
  \begin{document}
  こんにちは世界！
  \end{document}
  ```

- VSCodeの右の縦に並んでいるアイコンの中にTEXというのがあると思うので、これを押してください。すると、LATEXというののいろんなメニューが出てきます。
- このメニューのコマンドの中から、「LaTeXプロジェクトをビルド」と書いてあるところの一番左の>を押してください。するとサブメニューが開くと思います。
- その中から「レシピ: latexmk (latexmkrc)」を選んでください。コンパイルされます。
- 「LaTeX PDFを表示」の中のサブメニューの「VSCodeタブで表示」を選んでください。右に新しいタブが開いて、出来上がった「こんにちは世界！」と書かれたpdfが表示されれば成功です。

## さらに設定

ここまでで、とりあえず使えるようになりました。ここから先は便利に使ったり、arXivや論文雑誌に投稿したり、他の人との共著を視野に入れた設定をします。

注意：Webで情報を調べると多くのサイトでsetting.jsonを書いて設定するやり方が出てきます。VSCodeを初めて使う人がこれをやるのはあまりおすすめできないです。よく分からないで、いろんなサイトのsetting.jsonをつぎはぎして、動かなくて泥沼になっている人を何人か見たことがあります。多くの必要な設定はGUIからできます。ある程度慣れてきて細かい設定をやりたくなって、GUIからできないようなことをやりたくなってからsetting.jsonを書き始めた方が良いと思います。

### ショートカット

コンパイルする際に、いちいちメニューからやっていると面倒くさいです。なのでショートカットから正しくコンパイルできるようにします。

- ⌘+, で設定を開きます。
- "latex recipe"とかで検索してLatex-workshop>Latex>Recipe:Defaultの項目を探します。ここを``latexmk (latexmkrc)``に書き換えます。

これで、⌘+⌥+bでコンパイルできるようになります。

この他にも、次のようなショートカットはよく使います。

- ⌘+⌥+vでpdfの表示。
- texファイルで、⌘+⌥+jでカーソルの位置に対応するpdfの位置に飛ぶ。
- 表示されているpdfファイル内を⌘+クリックで、クリックした場所に対応するtexファイルの場所に飛ぶ。
- ⌘+⌥+cで、中間ファイルの削除。

他にも⌘+⇧+Pでコマンドパレットが開いてlatexで検索すると関係するコマンドが出てきます。ここにはショートカットも表示されるので、よく使いそうなものは覚えると便利です。

### latexmkrc

latexmkの設定ファイルは上で書いた~/.latexmkrcの他にtexファイルと同じフォルダにあるlatexmkrcのファイルに書くこともできます。ファイル名の先頭のピリオドのあるなしに注意してください。texファイルと同じフォルダにある方が優先されます。

これを利用して、texの文書ごとに異なるコンパイルの仕方を設定することができます。むしろ、デフォルトに頼らず、文書ごとにlatexmkrcを書くべきだと思います。これは誰かにtexのソースを渡したり、共同執筆したりするときに、必ず書いた人が意図した方法でコンパイルされるようにするためです。また、arXivに投稿する論文はpdflatexでコンパイルされますが、そのような論文はpdflatexでコンパイルして表示を確かめるべきです。また、日本語の文章を書く場合には、上で紹介したlualatexを使うよりもuplatexを使うほうがかなり速いです。慣れてきたら日本語を書く場合にはuplatexを使うほうが良いかもしれません。

以下にいくつか設定ファイルの例を示します（2024年12月ちょくちょく変えてます）。

1. 日本語でuplatexを使用する場合：

    ``` perl
    $texoption = ' %O -interaction=nonstopmode -file-line-error -synctex=1 %S';
    $latex = 'uplatex'.$texoption;
    $pdflatex = 'pdflatex'.$texoption;
    $lualatex = 'lualatex'.$texoption;
    $biber = 'biber %O --bblencoding=utf8 -u -U --output_safechars %B';
    $bibtex = 'pbibtex %O %B';
    $makeindex = 'upmendex %O -o %D %S';
    $dvipdf = 'dvipdfmx %O -o %D %S';
    $pdf_mode = 3;
    ```

2. 英語でpdflatexを使用する場合

    ``` perl
    $texoption = ' %O -interaction=nonstopmode -file-line-error -synctex=1 %S';
    $latex = 'uplatex'.$texoption;
    $pdflatex = 'pdflatex'.$texoption;
    $lualatex = 'lualatex'.$texoption;
    $biber = 'biber %O --bblencoding=utf8 -u -U --output_safechars %B';
    $bibtex = 'pbibtex %O %B';
    $makeindex = 'upmendex %O -o %D %S';
    $dvipdf = 'dvipdfmx %O -o %D %S';
    $pdf_mode = 1;
    ```

3. 日本語か英語でlualatexを使用する場合

     ``` perl
    $texoption = ' %O -interaction=nonstopmode -file-line-error -synctex=1 %S';
    $latex = 'uplatex'.$texoption;
    $pdflatex = 'pdflatex'.$texoption;
    $lualatex = 'lualatex'.$texoption;
    $biber = 'biber %O --bblencoding=utf8 -u -U --output_safechars %B';
    $bibtex = 'pbibtex %O %B';
    $makeindex = 'upmendex %O -o %D %S';
    $dvipdf = 'dvipdfmx %O -o %D %S';
    $pdf_mode = 4;
    ```

上の３つの例では、$pdfmode だけが異なります。platexの設定は書いていませんが、uplatexでもよいならuplatexを使うべきです。不幸にしてスタイルファイルを強制されているなどの理由でplatexを使わなければならない場合にはuplatexの設定の中の"uplatex"を"platex"に書き換えればよいはずです。

### uplatexのテスト

日本語の文章をコンパイルする場合、上で述べたlualatexを用いるよりもuplatex+dvipdfmxを用いたほうがかなり速いです。ここでは、それをテストしてみましょう。

- 先ほどテストで作った“latextest”を開いてください。
- VSCodeのエクスプローラーからlatextestの中に“latexmkrc”という名前（.は無いことに注意）のテキストファイルを作成して、上の「日本語でuplatexを使用する場合」の設定をコピペして保存してください。
- “test.tex”のファイルを開いて⌘+⌥+cで中間ファイルを消した後、⌘+⌥+bでコンパイルしてください。
- ⌘+⌥+vでpdfを表示させてください。うまくいっていれば「こんにちは世界！」と書かれたpdfが表示されます。
- エクスプローラーでlatextestの中に“test.dvi”というファイルがあることを確認してください。これがあれば正しくuplatexでコンパイルされているはずです。無い場合にはuplatexが使えていませんので、カレントディレクトリの`latexmkrc`ファイルの$pdf_modeがのところが`$pdf_mode = 3`になっているか、あるいはVSCodeの設定のLatex-workshop>Latex>Recipe:Defaultのところが`latexmk (latexmkrc)`となっているかを確認してみてください。

### pdflatexのテスト

arXivに投稿する論文はpdflatexで正しくコンパイルされるようにtexファイルを準備すべきです。これまで設定してきた環境でpdflatexで正しくコンパイルできるかどうかテストしてみましょう。

- VSCodeのメニューからファイル＞フォルダを開くを選択し、適当なところに“pdflatextest”という新しいフォルダを作って開いてください。
- VSCodeのエクスプローラーからpdflatextestの中に“latexmkrc”という名前（.は無いことに注意）のテキストファイルを作成して、上の「英語でpdflatexを使用する場合」の設定をコピペして保存してください。
- VSCodeのエクスプローラーからpdflatextestの中に“test.tex”というファイルを作ってください。
- このファイルに次をコピペして保存してください。

  ``` latex
  \documentclass{article}
  \begin{document}
  Hello world!
  \end{document}
  ```

- ⌘+⌥+bでコンパイルしてください。
- ⌘+⌥+vでpdfを表示させてください。うまくいっていればHello world!と書かれたpdfが表示されます。
- エクスプローラーでpdflatextestの中に“test.log”というファイルがあるはずです。これを開いてみて最初の方が❝This is pdfTeX, ...”となっていることを確認してください。これが❝This is LuaHBTeX, ...”となっていたらうまくpdflatexが使えていませんので、カレントディレクトリの`latexmkrc`ファイルの$pdf_modeがのところが`$pdf_mode = 1`になっているか、あるいはVSCodeの設定のLatex-workshop>Latex>Recipe:Defaultのところが`latexmk (latexmkrc)`となっているかを確認してみてください。

## Git と Github

ある程度ちゃんとした文書を書く場合、特に共同執筆する場合にはGitやGithubを用いると便利です。これらを用いるもう少し詳しい動機等は[バージョン管理ツールを使おう](git.html)を見てください。

### Gitの設定

GitそのものはMacなら最初から入っています。確認するためにVSCodeからターミナルを開いて次を入力してみてください。

  ```bash
  git version
  ```

バージョン情報などが出力されれば成功です。

最初にやることは、ユーザー名とemailアドレスを設定することです。あなたが作成している文書を改変したときに、ここで設定した名前とメールアドレスが記録されます。ターミナルで次を入力してください。`Your Name`のところにあなたの名前、`yourname@example.com`にあなたのメールアドレスを入れてください

  ```sh
  git config --global user.name "Your Name"
  git config --global user.email yourname@example.com
  ```

次のように入力すると、現在のconfigが表示されます。

  ```sh
  git config --list
  ```

この出力の中の`user.name`と`user.email`が正しく設定されていることを確認してください。

### Gitを使ってみる

ここで、試しにGitを使ってみましょう。上で作ったpdflatextestのフォルダを例にして説明します。

- VSCodeで上で作ったpdflatextestのフォルダを開きます。
- 左に縦に並んでいるアイコンのうち、![git icon](img/giticon.png)のアイコンを押します。ソース管理というところが出てきます。Gitに関する様々な操作はここから行います。
- まず、初期化します。「リポジトリの初期化」というボタンを押してください。「メッセージ」というテキスト入力欄があってその下に「コミット」というボタン、その下の「変更」という文字の下にファイル名がずらずら出てきている状態になったと思います。
- コミットをしてみましょう。
  - まず、ステージングという操作を行います。`test.tex`の上にマウスカーソルを持っていくと横に３つのアイコン（紙と曲った矢印と＋）が現れるので、＋を押します。すると`text.tex`が「ステージされている変更」というところに移動します。同様に`latexmkrc`もステージされている変更のところに移動します。ここでステージされている変更に移動したファイルは変更されたファイルのうち*バージョン管理したい*ファイルです。原則として手で書いたファイルをバージョン管理し、自動的に生成されたファイルはしません。これはあくまで原則なので臨機応変に便利なようにしたほうがいいと思います。
  - 「メッセージ」の入力欄に「最初のコミット」と入力します。ここはそのコミットの短い説明です。どこを変更したかを短く書きます。日本語が読めない人が見る可能性があれば、英語で書きましょう。
  - 「コミット」のボタンを押します。下のソース管理のところに○最初のコミット Your Nameのような感じのものができていれば成功です。

さて、ファイルが増えてくるとバージョン管理したいファイルをいちいち選ぶのが面倒になります。だいたいバージョン管理したいファイルは決まっています。実はバージョン管理したくないファイルを最初から変更のところに表示させない方法があります。次のようにします。

- 右のアイコンのうち一番上の書類のアイコンをおしてエクスプローラーを出します。`pdflatextest`の下に新しいファイルを作って`.gitignore`という名前にします。
- `.gitignore`の中に次をコピペして保存します。これは無視するファイルを並べたものです。`*`はワイルドカードと呼ばれていて任意の文字列が入ります。

  ```gitignore
  *.aux
  *.dvi
  *.log
  *.out
  *.toc
  *.synctex.gz
  *.fdb_latexmk
  *.bbl
  *.blg
  *.fls
  test.pdf
  ```

- ![git icon](img/giticon.png)のアイコンを押してソース管理を出します。「変更」のところが`.gitignore`だけになっているでしょうか？他にファイルが表示されている場合、それがあなたが作った覚えのないファイルなら、`.gitignore`の中にそのファイル名を書くと「変更」のところから消えるはずです。作った覚えがあってバージョン管理したいならそのままにします。
- 「変更」のところにカーソルを合わせて横に出てきた＋を押します。ここを押すと変更に表示されているすべてのファイルがステージされている変更に移動します。
- メッセージのところに「.gitignoreを追加」と書いてコミットを押します。下のソース管理のところにこのコミットの情報が追加されていたら成功です。

実際の執筆ではファイルを変更していって、適当なところでコミットするというのを繰り返します。今の`pdflatextest`のところにあるファイルは何してもいいものでしょうから、ここでいろいろ試してみてどういうことができるのかを確かめておくと良いと思います。特に、コミットを取り消す方法とか、差分を見る方法は大事かと思います。

### Githubの設定

さて共同執筆したりする場合には変更の履歴などをリモートで共有する必要があります。このときに用いるのがGithubというサイトです。一人で書く場合にもここに上げておくとバックアップにもなって良いです。まずは [GitHub](https://github.com/)に行ってアカウントを作っておきます。ここから先、VSCodeと連携するのは最初のリポジトリをあげる際についでに行います。

### Githubを使ってみる

さて、上で作った`pdflatextest`のフォルダの履歴をGithubにあげてみます。ここは連携の設定を兼ねています。

- まず、標準のブラウザでGithubにログインしておきます。
- VSCodeで上で作った`pdflatextest`のフォルダを開きます。
- ![git icon](img/giticon.png)のアイコンを押してソース管理を出します。「Branchの発行」というボタンが表示されていれば、次に行きます。表示されていなければ、変更されたファイルがあるということなので、コミットするか.gitignoreに入れてコミットします。変更されたファイルがなくなると「Branchの発行」というボタンが現れます。
- 「Branchの発行」というボタンを押します。VSCodeをインストールして、最初にこれをやるときには「拡張機能`GitHub`がGitHubを使用してサインインしようとしています。」というメッセージが出ます。ここで連携の設定をしますので「許可」のボタンを押してください。
  - ブラウザにうつって"Select user to authorize Visual Studio Code"というページに行きます。その下に`Signed in as (Githubのユーザー名)`と出ていると思うので、continueを押してください。
  - 次のページに色々情報が出ています。確認して、"Authorize Visual-Studio-Code"のボタンを押してください。
  - 「Visual Studio Code を開きますか？」というメッセージが出たら「Visual Studio Codeを開く」というボタンを押してください。
  - これでVSCodeに戻ってきて連携は完了しました。
- 上のテキスト入力欄に`pdflatextest`というのが出ています。これはリモートリポジトリに付けられる名前です。
- その下に２つの選択肢「Publish to GitHub private repository」と「Publish to GitHub public repository」というのがあります。前者は非公開、後者は公開のリポジトリになります。ここでは前者「Publish to GitHub private repository」をクリックしましょう。
- これでGithubにこのリポジトリがあげれたと思います。ブラウザでGitHubにログインして`pdflatextest`のリポジトリを確認してみてください。

## 有用なツール

### スペルチェック

スペルチェックがあると便利です。私はVSCodeの拡張機能のLTeX+というパッケージを使っています。これは簡単な文法チェックもやってくれるものです。

### Github Copilot

Github CopilotとはAIで補完等してくれるものです。LaTeXで論文を書くときにも補完してくれます。ある程度まで無料で使えます。どの程度便利かはまあ書く内容にもよると思います。VSCodeの拡張機能で導入することができます。

### Inkscape

[Inkscape](https://inkscape.org/ja/)は、ドロー系のお絵かきソフトで論文などに入れる図を書くのに使います。Macでもだいぶ使いやすくなりました。Homebrewでinstallできます。

  ```sh
  brew install --cask inkscape
  ```

数式を貼りたい場合、以下のような方法が可能です。

- デフォルトで数式を扱うプラグインが入っているのでそれを使います。Inkscapeはターミナルから起動しないといけないようです。ターミナルで`inkscape &`と入力してリターンを押すとinkscapeが起動します。そしてInkscapeのメニューのエクステンション＞テキスト＞公式(pdflatex)を選ぶとダイアログが出てきてlatexの書式で数式が書けます。
- [TexText](https://textext.github.io/textext/)を使う方法もあります。これは再編集が可能です。しかし私が試した限り日本語キーボードから\を入力するのが面倒です。何も考えないと¥が出てきます。新しいものはTypstも使えます。

## その他のメモ

### pdfファイルをバージョン管理すべきか

LaTeXのプロジェクトで出来上がったpdfファイルは機械が作るものなので、原則に従えば.gitignoreに加えてバージョン管理から外すべきです。しかし、次のようなことはよくあります。

- 手元にPCは無いけれど、ipadから自分の書いていたノートを見たい。しかし、Github上にはソースしかない。コンパイルするのは面倒くさい。
- 共著論文を書くときに、共同研究者に直接書き直してほしいわけではないけれど、見るだけ見てほしい。共同研究者がコンパイルできるか分からない。

こういう場合、github上で（コンパイルすることなく）pdfファイルが見れるというのは便利です。なのでpdfファイルもバージョン管理に加えておく方が良いのかもしれません。

### Windowsの場合

Windowsのコマンドラインでtexのプログラムやその他のコマンドラインプログラムを動かすと何故か非常に遅いです。なのでWindows Subsystem for Linux(WSL)を使うと良いと思います。Windows側でインストールしたVSCodeを使ってWSLのファイルを編集したりプログラムを動かしたりターミナルを使ったりできます。

WindowsでWSLとVScodeを使う情報は [Windows Subsystem for Linux に関するドキュメント | Microsoft Learn](https://learn.microsoft.com/ja-jp/windows/wsl/)から得られます。具体的には

- [WSL のインストール | Microsoft Learn](https://learn.microsoft.com/ja-jp/windows/wsl/install)
- [WSL で VS Code の使用を開始する | Microsoft Learn](https://learn.microsoft.com/ja-jp/windows/wsl/tutorials/wsl-vscode)

を見るとWSLでVSCodeを使い始めることができるようになると思います。

WSLでのTexlinveのインストールはいくつか方法があります。例えば [Quick install - TeX Live - TeX Users Group](https://www.tug.org/texlive/quickinstall.html)に書いてある一般的なUnixにインストールする方法でできると思います。 あるいは[Homebrew — The Missing Package Manager for macOS (or Linux)](https://brew.sh/)からインストールすることもできると思います（未確認）。

後は、上で述べた「必要な設定」以下はMacの場合と同様です。一つよく考えたほうが良いのはディレクトリ構成です。まず、ホームディレクトリがどこかをちゃんと確認しておきます。ターミナルで`cd`とだけ入力してリターンを押して行けるところがホームディレクトリです。`.latexmkrc`などの設定ファイルはこのホームディレクトリに置きます。いろんな文書などをこのホームディレクトリに直接置いてしまうと散らかって大変なことになります。なので例えばホームディレクトリの下に`documents`というフォルダーを作って、その下にプロジェクトごとにフォルダーを作って文書ファイルはその中に置くというような構成にすると良いかもしれません。

### Bibtex

LaTeXで文献リストを入れる場合、bibtexを用います。自動的に並べ替えてくれます。以下素粒子理論分野（あるいはhep-th分野）特有の慣習を含めた情報です。

Bibtexを用いるには、まず文献ファイル（bibファイル）を作る必要があります。〇〇.bibというテキストファイルを作り、文献の情報をフォーマットに従って書いていきます。これは[INSPIRE](https://inspirehep.net/)で検索して出てくる文献の場合には簡単で、出てきた文献のciteというところを押して出てくるダイアログボックスで右下のプルダウンメニューをBibtexにしてCopy to Clipboard押してコピペすれば良いです。INSPIREに無い文献の場合には、Google Scholarを調べるか、がんばって情報を手で書く必要があります。

bibtexを使うには文献スタイルファイル（bstファイル）も必要です。標準で用意されているスタイルにはなかなか素粒子理論分野の習慣に合っているものがありません。私は[Jacques Distler氏](https://golem.ph.utexas.edu/~distler/)が作られた [utphys.bst](https://golem.ph.utexas.edu/~distler/code/utphys/)を使っています。これはhep-th分野で標準的に用いられる形式にしたがっていて、しかもarxivやdoiに自動的にリンクが貼られるという便利なものです。texファイルと同じディレクトリに`utphys.bst`を置いて、texファイルの中で`\bibliographystyle{utphys}`と書けば読み込ませることができます。

### テンプレを作るスクリプト

LaTeXを最初に書き始める場合、いつも同じような作業をする必要があります。私はこれをスクリプトを書いてやっています。このまま人様に使ってもらえるような代物でもないですが、ご参考のために公開します。

- [newtexproject](https://github.com/satshi/newtexproject.git)
